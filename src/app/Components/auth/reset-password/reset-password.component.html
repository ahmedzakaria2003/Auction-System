<div class="auth-container min-vh-100" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);">
  <div class="floating-elements"></div>
  <div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center">
    <div class="row w-100 justify-content-center">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        
        <!-- Header Section -->
        <div class="text-center mb-5 fade-in">
          <div class="gavel-animation mb-3">
            <h1 class="display-4 text-white pulse-glow">
              🏛️ <span class="text-auction-gold">مزاداتي</span> 🔨
            </h1>
          </div>
          <p class="lead text-white-50">استعادة كلمة المرور</p>
        </div>

        <!-- Reset Password Card -->
        <div class="golden-border overflow-hidden slide-in-left" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 2px solid #D4AF37; border-radius: 15px; box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);">
          <div class="p-4 p-md-5">
            
            <!-- Step 1: Enter Email -->
            <div *ngIf="currentStep === 1" class="step-container">
              <h3 class="text-auction-gold mb-4 text-center">
                <i class="fas fa-envelope me-2"></i>إدخال البريد الإلكتروني
              </h3>
              
              <div class="text-center mb-4">
                <div class="step-indicator">
                  <span class="step active">1</span>
                  <span class="step-line"></span>
                  <span class="step">2</span>
                  <span class="step-line"></span>
                  <span class="step">3</span>
                </div>
                <p class="text-white-50 mt-3">أدخل بريدك الإلكتروني لإرسال رمز التحقق</p>
              </div>
              
              <form>
                <div class="mb-4">
                  <label class="form-label text-white">البريد الإلكتروني</label>
                  <div class="input-group">
                    <span class="input-group-text bg-auction-gold border-0">
                      <i class="fas fa-envelope text-white"></i>
                    </span>
                    <input 
                      type="email" 
                      class="form-control"
                      [(ngModel)]="email" 
                      name="email"  
                      placeholder="أدخل بريدك الإلكتروني"
                      required
                      [class.is-invalid]="email && !emailRegex.test(email)"
                    >
                  </div>
                  <div *ngIf="email && !emailRegex.test(email)" class="invalid-feedback">
                    البريد الإلكتروني غير صالح
                  </div>
                </div>
                
                <button 
                  type="button" 
                  class="btn btn-auction w-100 mb-3" 
                  (click)="nextStep()" 
                  [disabled]="!email || !emailRegex.test(email)">
                  إرسال رمز التحقق 📧
                </button>
              </form>

              <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                {{ errorMessage }}
              </div>
            </div>

            <!-- Step 2: Enter OTP -->
            <div *ngIf="currentStep === 2" class="step-container">
              <h3 class="text-auction-gold mb-4 text-center">
                <i class="fas fa-key me-2"></i>رمز التحقق
              </h3>
              
              <div class="text-center mb-4">
                <div class="step-indicator">
                  <span class="step completed">✓</span>
                  <span class="step-line completed"></span>
                  <span class="step active">2</span>
                  <span class="step-line"></span>
                  <span class="step">3</span>
                </div>
                <p class="text-white-50 mt-3">تم إرسال رمز التحقق إلى بريدك الإلكتروني</p>
              </div>
              
              <form>
                <div class="mb-4">
                  <label class="form-label text-white">رمز التحقق (OTP)</label>
                  <div class="otp-container d-flex justify-content-center mb-3">
                    <input 
                      type="text" 
                      class="form-control text-center" 
                      [(ngModel)]="otp" 
                      name="otp" 
                      maxlength="6" 
                      required 
                      placeholder="أدخل 6 أرقام OTP"
                      [class.is-invalid]="otp && otp.length < 6"
                    >
                  </div>
                  <div *ngIf="otp && otp.length < 6" class="invalid-feedback">
                    رمز التحقق يجب أن يتكون من 6 أرقام
                  </div>
                </div>
                
                <button 
                  type="button" 
                  class="btn btn-auction w-100 mb-3" 
                  (click)="nextStep()" 
                  [disabled]="!isOtpComplete">
                  تحقق من الرمز 🔐
                </button>
              </form>

              <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                {{ errorMessage }}
              </div>
            </div>

            <!-- Step 3: Reset Password -->
            <div *ngIf="currentStep === 3" class="step-container">
              <h3 class="text-auction-gold mb-4 text-center">
                <i class="fas fa-lock me-2"></i>كلمة المرور الجديدة
              </h3>
              
              <div class="text-center mb-4">
                <div class="step-indicator">
                  <span class="step completed">✓</span>
                  <span class="step-line completed"></span>
                  <span class="step completed">✓</span>
                  <span class="step-line completed"></span>
                  <span class="step active">3</span>
                </div>
                <p class="text-white-50 mt-3">أدخل كلمة المرور الجديدة</p>
              </div>
              
              <form>
                <div class="mb-3">
                  <label class="form-label text-white">كلمة المرور الجديدة</label>
                  <div class="input-group">
                    <span class="input-group-text bg-auction-gold border-0">
                      <i class="fas fa-lock text-white"></i>
                    </span>
                    <input 
                      type="{{ passwordFieldType }}"
                      class="form-control"
                      [(ngModel)]="newPassword"  
                      name="newPassword"  
                      placeholder="أدخل كلمة المرور الجديدة"
                      required
                      >
                    <button type="button" class="btn btn-outline-secondary" (click)="togglePasswordVisibility()">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </div>

                <!-- Password Requirements -->
                <div class="password-requirements mb-4">
                  <small class="text-white-50">متطلبات كلمة المرور:</small>
                  <ul class="list-unstyled mt-2">
                    <li class="text-white-50">
                      <i class="fas fa-check text-success"></i>
                      على الأقل 6 أحرف
                    </li>
                  </ul>
                </div>
                
                <button 
                  type="button" 
                  class="btn btn-auction w-100 mb-3" 
                  (click)="nextStep()" 
                  [disabled]="!newPassword || newPassword.length < 6">
                  تحديث كلمة المرور 🔒
                </button>
              </form>

              <div *ngIf="errorMessage" class="alert alert-danger mt-3">
                {{ errorMessage }}
              </div>
            </div>

            <!-- Success Message -->
            <div *ngIf="currentStep === 4" class="step-container text-center">
              <div class="success-animation mb-4">
                <i class="fas fa-check-circle fa-5x text-success"></i>
              </div>
              <h3 class="text-auction-gold mb-3">تم تحديث كلمة المرور بنجاح!</h3>
              <p class="text-white-50 mb-4">يمكنك الآن تسجيل الدخول بكلمة المرور الجديدة</p>
              <a routerLink="/login" class="btn btn-auction">
                العودة لتسجيل الدخول 🚪
              </a>
            </div>

            <!-- Back to Login -->
            <div class="text-center" *ngIf="currentStep < 4">
              <a routerLink="/login" class="text-auction-gold text-decoration-none">
                <i class="fas fa-arrow-right me-2"></i>العودة لتسجيل الدخول
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



  