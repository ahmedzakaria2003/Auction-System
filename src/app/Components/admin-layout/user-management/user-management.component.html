<div class="users-page">
      <!-- Page Header -->
      <div class="page-header">
        <div class="header-content">
          <h2 class="text-auction-gold">
            <i class="fas fa-users me-2"></i>
            إدارة المستخدمين
          </h2>
          <p class="text-muted">إدارة جميع المستخدمين في النظام</p>
        </div>
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">{{totalUsers}}</span>
            <span class="stat-label">إجمالي المستخدمين</span>
          </div>
          <div class="stat-item">
            <span class="stat-number banned">{{bannedUsers}}</span>
            <span class="stat-label">محظورين</span>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-section">
        <div class="row">
          <div class="col-md-3">
            <select class="form-select" [(ngModel)]="selectedUserType" (change)="loadUsers()">
              <option value="">جميع الأنواع</option>
              <option value="Bidder">مزايد</option>
              <option value="Seller">بائع</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select" [(ngModel)]="selectedStatus" (change)="loadUsers()">
              <option value="">جميع الحالات</option>
              <option value="active">نشط</option>
              <option value="banned">محظور</option>
            </select>
          </div>
          <div class="col-md-4">
            <div class="search-box">
              <input type="text" class="form-control" placeholder="البحث في المستخدمين..." 
                     [(ngModel)]="searchTerm" (input)="loadUsers()">
              <i class="fas fa-search search-icon"></i>
            </div>
          </div>
          <div class="col-md-2">
            <button class="btn btn-outline-secondary w-100" (click)="resetFilters()">
              <i class="fas fa-refresh me-2"></i>إعادة تعيين
            </button>
          </div>
        </div>
      </div>

      <!-- Users Table -->
      <div class="users-table-container">
        <div class="table-responsive">
          <table class="table users-table">
            <thead>
              <tr>
                <th>المستخدم</th>
                <th>البريد الإلكتروني</th>
                
                <th>الحالة</th>
                <th>الإجراءات</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let user of users" class="user-row" [class.banned-row]="user.isBanned">
                <td>
                  <div class="user-info">
                    <div class="user-avatar">
                      <i class="fas fa-user-circle fa-2x" [class.text-danger]="user.isBanned" [class.text-auction-gold]="!user.isBanned"></i>
                    </div>
                    <div class="user-details">
                      <h6 class="mb-1">{{user.fullName}}</h6>
                      <small class="text-muted">ID: {{user.userId.substring(0, 8)}}...</small>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="email">{{user.email}}</span>
                </td>
             
               
               
                <td>
                  <span class="status-badge" [ngClass]="user.isBanned ? 'status-banned' : 'status-active'">
                    {{user.isBanned ? 'محظور' : 'نشط'}}
                  </span>
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="btn btn-sm btn-info" (click)="viewUserDetails(user.userId)" 
                            title="عرض التفاصيل">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button class="btn btn-sm" 
                            [class.btn-success]="user.isBanned" 
                            [class.btn-warning]="!user.isBanned"
                            (click)="toggleUserBan(user)" 
                            [title]="user.isBanned ? 'إلغاء الحظر' : 'حظر المستخدم'">
                      <i class="fas" [class.fa-unlock]="user.isBanned" [class.fa-ban]="!user.isBanned"></i>
                    </button>
                
                  </div>
                </td>
              </tr>
                        <tr *ngIf="nonUsersMessage">
  <td colspan="8" class="text-center text-danger">
    {{ nonUsersMessage }}
  </td>
</tr>          

            </tbody>
          </table>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination-container">
        <nav>
          <ul class="pagination justify-content-center">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <a class="page-link" (click)="changePage(currentPage - 1)">السابق</a>
            </li>
            <li class="page-item" *ngFor="let page of getPageNumbers()" 
                [class.active]="page === currentPage">
              <a class="page-link" (click)="changePage(page)">{{page}}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages">
              <a class="page-link" (click)="changePage(currentPage + 1)">التالي</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <!-- User Details Modal -->
    <div class="modal fade" [class.show]="showUserModal" [style.display]="showUserModal ? 'block' : 'none'">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-auction-gold">
              <i class="fas fa-user me-2"></i>تفاصيل المستخدم
            </h5>
            <button type="button" class="btn-close" (click)="showUserModal = false"></button>
          </div>
          <div class="modal-body" *ngIf="selectedUser">
            <div class="user-profile">
              <div class="profile-header text-center">
                <i class="fas fa-user-circle fa-5x text-auction-gold mb-3"></i>
                <h4>{{selectedUser.fullName}}</h4>
                <p class="text-muted">{{selectedUser.email}}</p>
                <span class="status-badge" [ngClass]="selectedUser.isBanned ? 'status-banned' : 'status-active'">
                  {{selectedUser.isBanned ? 'محظور' : 'نشط'}}
                </span>
              </div>
              <div class="profile-details mt-4">
                <div class="row">
                  <div class="col-md-6">
                    <div class="detail-card">
                      <h6><i class="fas fa-id-card me-2"></i>معرف المستخدم</h6>
                      <p>{{selectedUser.userId}}</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="detail-card">
                      <h6><i class="fas fa-user-tag me-2"></i>نوع المستخدم</h6>
                      <p>{{getUserTypeText(selectedUser.userType)}}</p>
                    </div>
                  </div>
                
               
                
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="showUserModal = false">إغلاق</button>
        
            <button type="button" class="btn" 
                    [class.btn-success]="selectedUser?.isBanned" 
                    [class.btn-warning]="!selectedUser?.isBanned"
                    (click)="toggleUserBan(selectedUser!)">
              <i class="fas" [class.fa-unlock]="selectedUser?.isBanned" [class.fa-ban]="!selectedUser?.isBanned"></i>
              {{selectedUser?.isBanned ? 'إلغاء الحظر' : 'حظر المستخدم'}}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Send Notification Modal -->
    <div class="modal fade" [class.show]="showNotificationModal" [style.display]="showNotificationModal ? 'block' : 'none'">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-auction-gold">
              <i class="fas fa-bell me-2"></i>إرسال إشعار
            </h5>
            <button type="button" class="btn-close" (click)="showNotificationModal = false"></button>
          </div>
       
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="showNotificationModal = false">إلغاء</button>
          
          </div>
        </div>
      </div>
    </div>
  