    <div class="reports-page">
      <!-- Page Header -->
      <div class="page-header">
        <div class="header-content">
          <h2 class="text-auction-gold">
            <i class="fas fa-file-alt me-2"></i>
            التقارير والتحليلات
          </h2>
          <p class="text-muted">تقارير مفصلة عن جميع المزادات والأنشطة</p>
        </div>
   
      </div>

      <!-- Report Filters-->
  <div class="filters-section">
  <div class="row g-3 align-items-end">
    <div class="col-md-3">
      <label class="form-label">من تاريخ</label>
      <input type="date" class="form-control" [(ngModel)]="dateFrom" (change)="loadAuctions()">
    </div>
    <div class="col-md-3">
      <label class="form-label">إلى تاريخ</label>
      <input type="date" class="form-control" [(ngModel)]="dateTo" (change)="loadAuctions()">
    </div>
    <div class="col-md-2">
      <label class="form-label">الفئة</label>
      <select class="form-select" [(ngModel)]="selectedCategory" (change)="loadAuctions()">
        <option value="">جميع الفئات</option>
        <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
      </select>
    </div>
    <div class="col-md-2">
      <label class="form-label">حالة المزاد</label>
      <select class="form-select" [(ngModel)]="selectedStatus" (change)="loadAuctions()">
        <option value="">جميع الحالات</option>
        <option value="open">مفتوح</option>
        <option value="closed">مُغلق</option>
        <option value="canceled">مُلغى</option>
      </select>
    </div>
    <div class="col-md-2">
      <button class="btn btn-outline-secondary w-100" (click)="resetFilters()">
        <i class="fas fa-refresh me-2"></i>إعادة تعيين
      </button>
    </div>
  </div>
</div>




      <!-- Auctions Reports Table -->
      <div class="reports-table-container mb-4">
        <div class="table-header">
          <h5><i class="fas fa-table me-2"></i>تقارير المزادات المفصلة</h5>
           <button type="button" class="btn btn-primary" (click)="printReport()">
              <i class="fas fa-print me-2"></i>طباعة
            </button>
        </div>
        <div class="table-responsive">
          <table class="table reports-table">
            <thead>
              <tr>
                <th>المزاد</th>
                <th>البائع</th>
                <th>الفئة</th>
                <th>السعر الابتدائي</th>
                                <th>عدد المزايدات</th>

<th>تاريخ النهاية</th>

                <th>الإجراءات</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let auction of filteredAuctions" class="auction-row">
                <td>
                  <div class="auction-info">
                    <h6 class="mb-1">{{auction.title}}</h6>
                    <small class="text-muted">{{auction.id.substring(0, 8)}}...</small>
                  </div>
                </td>
                <td>{{auction.sellerName}}</td>
                <td>
                  <span class="category-badge">{{auction.categoryName}}</span>
                </td>
                <td class="price">${{auction.startingPrice | number:'1.2-2'}}</td>
                <td>
                  <span class="bids-count">
                    <i class="fas fa-hand-paper me-1"></i>
                    {{auction.bidsCount}}
                  </span>
                </td>
             
                <td>{{formatDate(auction.endTime)}}</td>
                <td>
                  <div class="action-buttons">
                    <button class="btn btn-sm btn-info" (click)="viewAuctionReport(auction.id)" 
                            title="عرض التقرير المفصل">
                      <i class="fas fa-eye"></i>
                    </button>
         
                  </div>
                </td>
              </tr>
        <tr *ngIf="noAuctionsMessage">
  <td colspan="8" class="text-center text-danger">
    {{ noAuctionsMessage }}
  </td>
</tr>

            </tbody>
          
          </table>
        </div>
      </div>


    </div>
        <!-- Pagination -->
      <div class="pagination-container">
        <nav>
          <ul class="pagination justify-content-center">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <a class="page-link" (click)="changePage(currentPage - 1)">السابق</a>
            </li>
            <li class="page-item" *ngFor="let page of getPageNumbers()" 
                [class.active]="page === currentPage">
              <a class="page-link" (click)="changePage(page)">{{page}}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages">
              <a class="page-link" (click)="changePage(currentPage + 1)">التالي</a>
            </li>
          </ul>
        </nav>
      </div>

     
    <!-- Detailed Auction Report Modal -->
    <div class="modal fade" [class.show]="showReportModal" [style.display]="showReportModal ? 'block' : 'none'">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-auction-gold">
              <i class="fas fa-file-alt me-2"></i>تقرير مزاد مفصل
            </h5>
            <button type="button" class="btn-close" (click)="showReportModal = false"></button>
          </div>
          <div class="modal-body" *ngIf="selectedAuction">
            <div class="auction-report" id="auction-report">
              <!-- Report Header -->
              <div class="report-header text-center mb-4">
                <h3 class="text-auction-gold">تقرير مزاد: {{selectedAuction.title}}</h3>
                <p class="text-muted">تاريخ التقرير: {{getCurrentDate()}}</p>
              </div>

              <!-- Auction Basic Info -->
              <div class="report-section">
                <h5><i class="fas fa-info-circle me-2"></i>معلومات أساسية</h5>
                <div class="row">
                  <div class="col-md-6">
                    <div class="info-item">
                      <strong>عنوان المزاد:</strong> {{selectedAuction.title}}
                    </div>
                    <div class="info-item">
                      <strong>البائع:</strong> {{selectedAuction.sellerName}}
                    </div>
                    <div class="info-item">
                      <strong>الفئة:</strong> {{selectedAuction.categoryName}}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="info-item">
                      <strong>تاريخ البداية:</strong> {{formatDateTime(selectedAuction.startTime)}}
                    </div>
                    <div class="info-item">
                      <strong>تاريخ النهاية:</strong> {{formatDateTime(selectedAuction.endTime)}}
                    </div>
                    <div class="info-item">
                      <strong>معرف المزاد:</strong> {{selectedAuction.id}}
                    </div>
                  </div>
                </div>
              </div>

              <!-- Financial Summary -->
              <div class="report-section">
                <h5><i class="fas fa-dollar-sign me-2"></i>الملخص المالي</h5>
                <div class="row">
                  <div class="col-md-4">
                    <div class="financial-card starting">
                      <h6>السعر الابتدائي</h6>
                      <h4>${{selectedAuction.startingPrice | number:'1.2-2'}}</h4>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="financial-card final">
                      <h6>السعر النهائي</h6>
                      <h4>${{selectedAuction.finalPrice | number:'1.2-2'}}</h4>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="financial-card profit">
                      <h6>الربح المحقق</h6>
                      <h4>${{(selectedAuction.finalPrice - selectedAuction.startingPrice) | number:'1.2-2'}}</h4>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Winner Info -->
              <div class="report-section" *ngIf="selectedAuction.winnerName">
                <h5><i class="fas fa-trophy me-2"></i>معلومات الفائز</h5>
                <div class="winner-card">
                  <div class="winner-icon">
                    <i class="fas fa-crown fa-2x text-auction-gold"></i>
                  </div>
                  <div class="winner-details">
                    <h6>{{selectedAuction.winnerName}}</h6>
                    <p>المبلغ الفائز: <strong>${{selectedAuction.highestBidAmount | number:'1.2-2'}}</strong></p>
                  </div>
                </div>
              </div>

              <!-- Bidding History -->
              <div class="report-section">
                <h5><i class="fas fa-history me-2"></i>تاريخ المزايدات ({{selectedAuction.totalBids}} مزايدة)</h5>
                <div class="bids-table-container">
                  <table class="table table-sm">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>المزايد</th>
                        <th>المبلغ</th>
                        <th>وقت المزايدة</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let bid of selectedAuction.bids; let i = index" 
                          [class.highest-bid]="bid.amount === selectedAuction.highestBidAmount">
                        <td>{{i + 1}}</td>
                        <td>{{bid.bidderName}}</td>
                        <td class="bid-amount">\${{bid.amount | number:'1.2-2'}}</td>
                        <td>{{formatDateTime(bid.bidTime)}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Description -->
              <div class="report-section">
                <h5><i class="fas fa-align-left me-2"></i>وصف المزاد</h5>
                <p class="description">{{selectedAuction.description}}</p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="showReportModal = false">إغلاق</button>
            <button type="button" class="btn btn-primary" (click)="printReport()">
              <i class="fas fa-print me-2"></i>طباعة
            </button>
        
          </div>
        </div>
      </div>
    </div>